<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>Stella Maris · Recetas</title>
  <style>
    :root{
      --bg:#0f1115;
      --stroke:rgba(255,255,255,.10);
      --text:#e8ecf6;
      --muted:rgba(232,236,246,.62);
      --brand:#7aa2ff;
      --bad:#ff5b6b;
      --r:18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background:var(--bg);
      color:var(--text);
    }
    .wrap{max-width:980px;margin:0 auto;padding:12px 12px 64px}
    .top{
      display:flex;align-items:center;justify-content:space-between;gap:10px;
      padding:10px 12px;border:1px solid var(--stroke);border-radius:var(--r);
      background:rgba(255,255,255,.03);
    }
    .top b{font-size:13px}
    .top small{display:block;color:var(--muted);font-size:11px;margin-top:2px}
    .right{display:flex;gap:8px;align-items:center;flex-wrap:wrap;justify-content:flex-end}
    .btn{
      border:1px solid rgba(122,162,255,.45);
      background:rgba(122,162,255,.16);
      color:var(--text);
      padding:9px 11px;
      border-radius:14px;
      font-weight:900;
      font-size:13px;
      cursor:pointer;
      user-select:none;
    }
    .btn.ghost{border-color:var(--stroke);background:rgba(255,255,255,.03)}
    .btn.bad{border-color:rgba(255,91,107,.45);background:rgba(255,91,107,.14)}
    .btn:active{transform:scale(.99)}

    .tabs{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
    .tab{
      border:1px solid var(--stroke);
      background:rgba(255,255,255,.03);
      color:var(--text);
      padding:10px 12px;
      border-radius:999px;
      font-weight:900;
      font-size:13px;
      cursor:pointer;
    }
    .tab.active{border-color:rgba(122,162,255,.45);background:rgba(122,162,255,.14)}

    .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:12px}
    @media(max-width:900px){ .grid{grid-template-columns:1fr} }

    .card{
      border:1px solid var(--stroke);
      border-radius:var(--r);
      background:rgba(255,255,255,.03);
      padding:12px;
    }
    h2{margin:0 0 10px;font-size:13px;color:var(--muted);letter-spacing:.2px}
    label{display:block;font-size:12px;color:var(--muted);margin:0 0 6px}

    input,select{
      width:100%;
      padding:11px 12px;
      border-radius:14px;
      border:1px solid var(--stroke);
      background:rgba(0,0,0,.22);
      color:var(--text);
      outline:none;
      font-size:16px; /* evita zoom iPhone */
      line-height:1.2;
    }
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .field{flex:1;min-width:170px}
    .btnrow{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    .sep{height:1px;background:var(--stroke);margin:12px 0}

    .list{display:flex;flex-direction:column;gap:8px;margin-top:10px}
    .item{
      border:1px solid var(--stroke);
      background:rgba(255,255,255,.02);
      border-radius:14px;
      padding:10px;
      display:flex;justify-content:space-between;gap:10px;align-items:center;
    }
    .item b{font-size:13px}
    .item small{display:block;color:var(--muted);font-size:12px;margin-top:2px}
    .actions{display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end}
    .chip{
      border:1px solid var(--stroke);
      border-radius:999px;
      padding:6px 8px;
      font-size:12px;
      color:var(--muted);
      white-space:nowrap;
    }

    .kpis{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .kpi{
      border:1px solid var(--stroke);
      border-radius:14px;
      padding:10px;
      background:rgba(255,255,255,.02);
    }
    .kpi span{display:block;color:var(--muted);font-size:12px}
    .kpi b{display:block;margin-top:4px;font-size:16px;font-variant-numeric:tabular-nums}

    table{width:100%;border-collapse:separate;border-spacing:0 8px}
    th{ text-align:left;font-size:12px;color:var(--muted);font-weight:900;padding:0 6px 6px}
    td{
      background:rgba(255,255,255,.02);
      border:1px solid var(--stroke);
      padding:10px;
      border-right:none;
      vertical-align:middle;
    }
    tr td:first-child{border-top-left-radius:14px;border-bottom-left-radius:14px}
    tr td:last-child{border-right:1px solid var(--stroke);border-top-right-radius:14px;border-bottom-right-radius:14px}
    .td-actions{white-space:nowrap}
    .mini{color:var(--muted);font-size:12px;line-height:1.35}
    .mono{font-variant-numeric:tabular-nums}
  </style>
</head>

<body>
<div class="wrap">
  <div class="top">
    <div>
      <b>Recetas</b>
      <small>Nombre · Insumo · Cantidad · Rinde · Costo · Venta · Margen</small>
    </div>
    <div class="right">
      <button class="btn ghost" id="btnBackup">Exportar</button>
      <button class="btn ghost" id="btnRestore">Importar</button>
    </div>
  </div>

  <div class="tabs">
    <button class="tab active" data-tab="armar">Armar receta</button>
    <button class="tab" data-tab="insumos">Insumos</button>
    <button class="tab" data-tab="recetas">Lista de recetas</button>
  </div>

  <!-- ARMAR -->
  <div id="view-armar" class="grid">
    <div class="card">
      <h2>Armar receta</h2>

      <!-- 1) Nombre de receta -->
      <div class="row">
        <div class="field">
          <label>Nombre de receta</label>
          <input id="rName" placeholder="Ej: Salsa de verdeo / Paella / Tarta" />
        </div>
      </div>

      <div class="sep"></div>

      <!-- 2) Insumo -->
      <div class="row">
        <div class="field">
          <label>Insumo</label>
          <select id="pickIng"></select>
        </div>
      </div>

      <!-- 3) Cantidad -->
      <div class="row">
        <div class="field">
          <label>Cantidad</label>
          <input id="lineQty" type="number" inputmode="decimal" step="0.01" min="0"
                 placeholder="Ej: 0,5 o 2" />
          <div class="mini" id="unitHint" style="margin-top:6px"></div>
        </div>
      </div>

      <div class="btnrow">
        <button class="btn" id="btnAddLine">Agregar</button>
        <button class="btn ghost" id="btnNew">Nueva receta</button>
        <button class="btn bad" id="btnClearDraft">Borrar borrador</button>
      </div>

      <div class="list" id="draftLines"></div>

      <div class="sep"></div>

      <!-- 4) Rinde / unidad o kg -->
      <div class="row">
        <div class="field" style="min-width:160px">
          <label>Rinde</label>
          <input id="rYieldQty" type="number" inputmode="decimal" step="0.01" min="0.01" value="1" />
        </div>
        <div class="field" style="min-width:160px">
          <label>Unidad</label>
          <select id="rYieldUnit">
            <option value="kg">kg</option>
            <option value="u">unidad</option>
          </select>
        </div>
      </div>

      <div class="sep"></div>

      <!-- 5) Costo (solo lectura, calculado) -->
      <div class="row">
        <div class="field">
          <label>Costo (calculado)</label>
          <input id="costReadonly" readonly />
        </div>
      </div>

      <div class="sep"></div>

      <!-- 6) Precio venta -->
      <div class="row">
        <div class="field">
          <label>Precio venta (por rinde)</label>
          <input id="rSellPrice" type="number" inputmode="decimal" step="0.01" min="0"
                 placeholder="Ej: precio por kg o por unidad" />
        </div>
      </div>

      <div class="btnrow">
        <button class="btn" id="btnSaveRecipe">Confirmar receta</button>
        <button class="btn bad" id="btnDeleteRecipe" style="display:none">Borrar receta</button>
      </div>

      <div class="mini">Al confirmar: se guarda y se limpia para cargar otra.</div>
    </div>

    <!-- 7) Margen + resumen -->
    <div class="card">
      <h2>Resumen</h2>
      <div class="kpis">
        <div class="kpi"><span>Costo total</span><b id="kTotal">$0</b></div>
        <div class="kpi"><span>Costo por rinde</span><b id="kPer">$0</b></div>
        <div class="kpi"><span>Precio venta</span><b id="kSell">$0</b></div>
        <div class="kpi"><span>Margen</span><b id="kMargin">$0</b></div>
      </div>
      <div class="sep"></div>
      <div class="mini">Nota: el costo usa el precio del insumo tal como lo cargaste (tu base).</div>
    </div>
  </div>

  <!-- INSUMOS -->
  <div id="view-insumos" class="grid" style="display:none">
    <div class="card">
      <h2>Agregar insumo</h2>
      <div class="row">
        <div class="field">
          <label>Nombre</label>
          <input id="ingName" placeholder="Ej: Merluza, Harina, Envase" />
        </div>
        <div class="field">
          <label>Unidad</label>
          <select id="ingUnit">
            <option value="kg">kg</option>
            <option value="u">unidad</option>
          </select>
        </div>
        <div class="field">
          <label>Precio (por unidad)</label>
          <input id="ingPrice" type="number" inputmode="decimal" step="0.01" min="0" placeholder="Ej: 18000 / 300" />
        </div>
      </div>
      <div class="btnrow">
        <button class="btn" id="btnSaveIng">Guardar</button>
        <button class="btn ghost" id="btnClearIng">Limpiar</button>
      </div>
      <div class="mini">Tip: mantenelo simple: kg o unidad y precio por esa unidad.</div>
    </div>

    <div class="card">
      <h2>Hoja de insumos</h2>
      <div style="overflow:auto">
        <table>
          <thead>
            <tr>
              <th>Nombre</th>
              <th>Unidad</th>
              <th>Precio</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="ingTable"></tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- RECETAS -->
  <div id="view-recetas" class="grid" style="display:none">
    <div class="card">
      <h2>Lista de recetas</h2>
      <div class="row">
        <div class="field">
          <label>Buscar</label>
          <input id="search" placeholder="Nombre..." />
        </div>
      </div>
      <div class="list" id="recipeList"></div>
    </div>

    <div class="card">
      <h2>Detalle</h2>
      <div id="detail" class="mini">Elegí una receta.</div>
    </div>
  </div>
</div>

<script>
  const LS = "sm_recetas_orden_v1";
  const state = load();

  function load(){
    try{
      const raw = localStorage.getItem(LS);
      if(!raw) return { ingredients:[], recipes:[] };
      const s = JSON.parse(raw);
      if(!Array.isArray(s.ingredients)) s.ingredients=[];
      if(!Array.isArray(s.recipes)) s.recipes=[];
      return s;
    }catch{
      return { ingredients:[], recipes:[] };
    }
  }
  function save(){ localStorage.setItem(LS, JSON.stringify(state)); renderAll(); }

  function uid(){ return Math.random().toString(16).slice(2) + Date.now().toString(16); }
  const fmt = new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",maximumFractionDigits:2});
  function money(n){ return fmt.format(Number.isFinite(n)?n:0); }
  function num(v){ const x=parseFloat(String(v).replace(",", ".")); return Number.isFinite(x)?x:0; }
  function esc(s){ return String(s??"").replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;"); }

  function findIng(id){ return state.ingredients.find(x=>x.id===id); }
  function findRec(id){ return state.recipes.find(x=>x.id===id); }

  // Tabs
  const tabs = Array.from(document.querySelectorAll(".tab"));
  tabs.forEach(t=>{
    t.addEventListener("click", ()=>{
      tabs.forEach(x=>x.classList.remove("active"));
      t.classList.add("active");
      const tab=t.dataset.tab;
      document.getElementById("view-armar").style.display = tab==="armar" ? "" : "none";
      document.getElementById("view-insumos").style.display = tab==="insumos" ? "" : "none";
      document.getElementById("view-recetas").style.display = tab==="recetas" ? "" : "none";
      renderAll();
    });
  });

  /** ========= INSUMOS ========= */
  let editingIngId = null;

  document.getElementById("btnSaveIng").addEventListener("click", ()=>{
    const name = document.getElementById("ingName").value.trim();
    const unit = document.getElementById("ingUnit").value;
    const price = num(document.getElementById("ingPrice").value);
    if(!name) return alert("Poné nombre.");
    if(price<=0) return alert("Precio debe ser > 0.");

    const obj = { id: editingIngId || uid(), name, unit, price };
    if(editingIngId){
      state.ingredients = state.ingredients.map(x=>x.id===editingIngId ? obj : x);
    }else{
      state.ingredients.push(obj);
    }
    clearIngForm();
    save();
  });

  document.getElementById("btnClearIng").addEventListener("click", clearIngForm);

  function clearIngForm(){
    editingIngId = null;
    document.getElementById("ingName").value = "";
    document.getElementById("ingUnit").value = "kg";
    document.getElementById("ingPrice").value = "";
    document.getElementById("btnSaveIng").textContent = "Guardar";
  }

  function renderIngTable(){
    const tb = document.getElementById("ingTable");
    tb.innerHTML = "";

    state.ingredients
      .slice()
      .sort((a,b)=>a.name.localeCompare(b.name,"es"))
      .forEach(ing=>{
        const tr=document.createElement("tr");
        tr.innerHTML = `
          <td><b>${esc(ing.name)}</b></td>
          <td class="mono">${ing.unit==="kg"?"kg":"u"}</td>
          <td class="mono">${money(ing.price)}</td>
          <td class="td-actions">
            <button class="btn ghost" data-act="edit">Editar</button>
            <button class="btn bad" data-act="del">Borrar</button>
          </td>
        `;
        tr.querySelector('[data-act="edit"]').addEventListener("click", ()=>{
          editingIngId = ing.id;
          document.getElementById("ingName").value = ing.name;
          document.getElementById("ingUnit").value = ing.unit;
          document.getElementById("ingPrice").value = ing.price;
          document.getElementById("btnSaveIng").textContent = "Guardar cambios";
          document.querySelector('.tab[data-tab="insumos"]').click();
        });
        tr.querySelector('[data-act="del"]').addEventListener("click", ()=>{
          const used = state.recipes.some(r=>r.lines.some(l=>l.ingId===ing.id));
          if(used) return alert("Ese insumo está usado en una receta. Borrá/edita la receta primero.");
          if(confirm(`Borrar "${ing.name}"?`)){
            state.ingredients = state.ingredients.filter(x=>x.id!==ing.id);
            save();
          }
        });
        tb.appendChild(tr);
      });
  }

  function buildPickIng(){
    const pick=document.getElementById("pickIng");
    pick.innerHTML="";
    if(state.ingredients.length===0){
      const opt=document.createElement("option");
      opt.value="";
      opt.textContent="Cargá insumos primero";
      pick.appendChild(opt);
      document.getElementById("unitHint").textContent = "";
      return;
    }
    state.ingredients
      .slice()
      .sort((a,b)=>a.name.localeCompare(b.name,"es"))
      .forEach(ing=>{
        const opt=document.createElement("option");
        opt.value=ing.id;
        opt.textContent = `${ing.name} · ${money(ing.price)}/${ing.unit==="kg"?"kg":"u"}`;
        pick.appendChild(opt);
      });
    updateUnitHint();
  }

  function updateUnitHint(){
    const ingId = document.getElementById("pickIng").value;
    const ing = findIng(ingId);
    document.getElementById("unitHint").textContent =
      ing ? `Unidad del insumo: ${ing.unit==="kg"?"kg":"unidad"} (se usa esa)` : "";
  }

  document.getElementById("pickIng").addEventListener("change", updateUnitHint);

  /** ========= ARMAR RECETA ========= */
  let draft = emptyDraft();
  function emptyDraft(){
    return { id:null, name:"", yieldQty:1, yieldUnit:"u", sellPrice:0, lines:[] };
  }

  function resetDraft(){
    draft = emptyDraft();
    syncDraftToUI();
    document.getElementById("btnDeleteRecipe").style.display="none";
    renderDraft();
  }

  function syncDraftToUI(){
    document.getElementById("rName").value = draft.name || "";
    document.getElementById("rYieldQty").value = draft.yieldQty ?? 1;
    document.getElementById("rYieldUnit").value = draft.yieldUnit || "u";
    document.getElementById("rSellPrice").value = draft.sellPrice ? String(draft.sellPrice) : "";
    document.getElementById("lineQty").value = "";
    document.getElementById("costReadonly").value = "";
  }

  function syncUIToDraft(){
    draft.name = document.getElementById("rName").value.trim();
    draft.yieldQty = Math.max(0.01, num(document.getElementById("rYieldQty").value) || 1);
    draft.yieldUnit = document.getElementById("rYieldUnit").value;
    draft.sellPrice = num(document.getElementById("rSellPrice").value);
  }

  ["rName","rYieldQty","rYieldUnit","rSellPrice"].forEach(id=>{
    document.getElementById(id).addEventListener("input", ()=>{ syncUIToDraft(); renderDraft(); });
    document.getElementById(id).addEventListener("change", ()=>{ syncUIToDraft(); renderDraft(); });
  });

  document.getElementById("btnNew").addEventListener("click", resetDraft);
  document.getElementById("btnClearDraft").addEventListener("click", ()=>{
    if(confirm("Borrar borrador?")) resetDraft();
  });

  document.getElementById("btnAddLine").addEventListener("click", ()=>{
    if(state.ingredients.length===0) return alert("Cargá insumos primero.");
    const ingId = document.getElementById("pickIng").value;
    const ing = findIng(ingId);
    if(!ing) return alert("Elegí un insumo válido.");
    const qty = num(document.getElementById("lineQty").value);
    if(qty<=0) return alert("Cantidad debe ser > 0.");

    draft.lines.push({ ingId, qty }); // unidad se deduce del insumo
    document.getElementById("lineQty").value="";
    renderDraft();
  });

  function recipeCostTotal(r){
    let total=0;
    for(const l of r.lines){
      const ing=findIng(l.ingId);
      if(!ing) continue;
      total += ing.price * num(l.qty);
    }
    return total;
  }
  function recipeCostPer(r){
    const y = Math.max(0.01, num(r.yieldQty));
    return recipeCostTotal(r)/y;
  }

  function renderDraft(){
    buildPickIng();

    const dl = document.getElementById("draftLines");
    dl.innerHTML="";

    draft.lines.forEach((l, idx)=>{
      const ing=findIng(l.ingId);
      const name = ing ? ing.name : "(insumo borrado)";
      const unit = ing ? (ing.unit==="kg"?"kg":"u") : "";
      const price = ing ? ing.price : 0;
      const lineCost = price * num(l.qty);

      const el=document.createElement("div");
      el.className="item";
      el.innerHTML = `
        <div>
          <b>${esc(name)}</b>
          <small class="mono">${l.qty.toFixed(2).replace(".",",")} ${unit} · ${money(lineCost)}</small>
        </div>
        <div class="actions">
          <button class="btn bad" data-act="del">Borrar</button>
        </div>
      `;
      el.querySelector('[data-act="del"]').addEventListener("click", ()=>{ draft.lines.splice(idx,1); renderDraft(); });
      dl.appendChild(el);
    });

    syncUIToDraft();

    const total = recipeCostTotal(draft);
    const per = recipeCostPer(draft);
    const sell = num(draft.sellPrice);
    const margin = sell>0 ? (sell - per) : 0;
    const pct = sell>0 ? (margin/sell)*100 : 0;

    document.getElementById("costReadonly").value = `${money(total)} total · ${money(per)} por rinde`;
    document.getElementById("kTotal").textContent = money(total);
    document.getElementById("kPer").textContent = money(per);
    document.getElementById("kSell").textContent = money(sell);
    document.getElementById("kMargin").textContent = sell>0 ? `${money(margin)} (${pct.toFixed(1)}%)` : money(0);

    document.getElementById("btnDeleteRecipe").style.display = draft.id ? "" : "none";
  }

  document.getElementById("btnSaveRecipe").addEventListener("click", ()=>{
    syncUIToDraft();
    if(!draft.name) return alert("Poné nombre de receta.");
    if(draft.lines.length===0) return alert("Agregá al menos 1 insumo.");

    const obj = JSON.parse(JSON.stringify(draft));
    obj.id = uid();
    obj.createdAt = Date.now();

    state.recipes.push(obj);
    save();

    alert("Guardada ✅");
    resetDraft(); // se vacía para cargar otra
  });

  document.getElementById("btnDeleteRecipe").addEventListener("click", ()=>{
    if(!draft.id) return;
    if(confirm(`Borrar receta "${draft.name}"?`)){
      state.recipes = state.recipes.filter(r=>r.id!==draft.id);
      save();
      resetDraft();
    }
  });

  /** ========= LISTA RECETAS ========= */
  document.getElementById("search").addEventListener("input", renderRecipeList);

  function renderRecipeList(){
    const q = document.getElementById("search").value.trim().toLowerCase();
    const list = document.getElementById("recipeList");
    list.innerHTML="";

    const arr = state.recipes
      .filter(r=> !q || (r.name||"").toLowerCase().includes(q))
      .sort((a,b)=> (a.name||"").localeCompare(b.name||"", "es"));

    arr.forEach(r=>{
      const total = recipeCostTotal(r);
      const per = recipeCostPer(r);
      const sell = num(r.sellPrice);
      const margin = sell>0 ? (sell - per) : 0;

      const el=document.createElement("div");
      el.className="item";
      el.innerHTML=`
        <div>
          <b>${esc(r.name)}</b>
          <small class="mono">costo ${money(per)}/${r.yieldUnit==="kg"?"kg":"u"} · venta ${money(sell)} · margen ${money(margin)}</small>
        </div>
        <div class="actions">
          <button class="btn ghost" data-act="open">Abrir</button>
          <button class="btn bad" data-act="del">Borrar</button>
        </div>
      `;
      el.querySelector('[data-act="open"]').addEventListener("click", ()=>{
        // solo muestra detalle, NO carga el borrador (porque vos querés cargar rápido otra)
        const lines = r.lines.map(l=>{
          const ing=findIng(l.ingId);
          const n = ing?ing.name:"(insumo)";
          const unit = ing ? (ing.unit==="kg"?"kg":"u") : "";
          return `• ${esc(n)} — ${l.qty.toFixed(2).replace(".",",")} ${unit}`;
        }).join("<br>");

        document.getElementById("detail").innerHTML = `
          <div class="mini">
            <b>${esc(r.name)}</b><br>
            Rinde: <b class="mono">${r.yieldQty} ${r.yieldUnit==="kg"?"kg":"u"}</b><br><br>
            Costo total: <b class="mono">${money(total)}</b><br>
            Costo por rinde: <b class="mono">${money(per)}</b><br>
            Venta: <b class="mono">${money(sell)}</b><br>
            Margen: <b class="mono">${money(margin)}</b><br><br>
            ${lines || "—"}
          </div>
        `;
      });
      el.querySelector('[data-act="del"]').addEventListener("click", ()=>{
        if(confirm(`Borrar "${r.name}"?`)){
          state.recipes = state.recipes.filter(x=>x.id!==r.id);
          save();
          document.getElementById("detail").textContent = "Elegí una receta.";
        }
      });
      list.appendChild(el);
    });

    if(arr.length===0){
      const e=document.createElement("div");
      e.className="mini";
      e.textContent="No hay recetas todavía.";
      list.appendChild(e);
    }
  }

  /** ========= BACKUP / RESTORE ========= */
  document.getElementById("btnBackup").addEventListener("click", ()=>{
    const data = JSON.stringify(state, null, 2);
    const blob = new Blob([data], {type:"application/json"});
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href=url;
    a.download="recetas-backup.json";
    document.body.appendChild(a);
    a.click();
    a.remove();
    URL.revokeObjectURL(url);
  });

  document.getElementById("btnRestore").addEventListener("click", ()=>{
    const input=document.createElement("input");
    input.type="file";
    input.accept="application/json";
    input.onchange = async ()=>{
      const f=input.files && input.files[0];
      if(!f) return;
      try{
        const txt=await f.text();
        const parsed=JSON.parse(txt);
        if(!parsed || typeof parsed!=="object") throw 0;
        state.ingredients = Array.isArray(parsed.ingredients) ? parsed.ingredients : [];
        state.recipes = Array.isArray(parsed.recipes) ? parsed.recipes : [];
        save();
        alert("Importado OK.");
      }catch{
        alert("Archivo inválido.");
      }
    };
    input.click();
  });

  /** ========= RENDER ========= */
  function renderAll(){
    renderIngTable();
    buildPickIng();
    renderDraft();
    renderRecipeList();
  }

  renderAll();
  resetDraft();
</script>
</body>
</html>