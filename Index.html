<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stella Maris - Sistema de Recetas</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#0f1115;
  color:white;
}

header{
  padding:15px;
  background:#141824;
  text-align:center;
  font-size:20px;
  font-weight:bold;
}

.container{
  padding:15px;
}

.card{
  background:#1b2130;
  padding:15px;
  margin-bottom:15px;
  border-radius:12px;
}

input, select{
  width:100%;
  padding:8px;
  margin-top:5px;
  margin-bottom:10px;
  border-radius:8px;
  border:none;
}

button{
  padding:10px;
  border:none;
  border-radius:10px;
  background:#7aa2ff;
  color:black;
  font-weight:bold;
  width:100%;
  cursor:pointer;
}

button:hover{
  opacity:0.9;
}

ul{
  padding-left:15px;
}
</style>
</head>

<body>

<header>Stella Maris Â· Sistema de Recetas</header>

<div class="container">

<div class="card">
<h3>Agregar Insumo</h3>
<input type="text" id="insumoNombre" placeholder="Nombre del insumo">
<input type="number" id="insumoCosto" placeholder="Costo por unidad">
<button onclick="agregarInsumo()">Guardar Insumo</button>
</div>

<div class="card">
<h3>Crear Receta</h3>
<input type="text" id="recetaNombre" placeholder="Nombre de la receta">
<select id="listaInsumos"></select>
<input type="number" id="cantidadInsumo" placeholder="Cantidad">
<button onclick="agregarItem()">Agregar a receta</button>
<button onclick="guardarReceta()">Guardar Receta</button>

<h4>Items de la receta:</h4>
<ul id="itemsReceta"></ul>
<p><strong>Costo total: $ <span id="costoTotal">0</span></strong></p>
</div>

<div class="card">
<h3>Recetas Guardadas</h3>
<ul id="recetasGuardadas"></ul>
</div>

</div>

<script>
let insumos = JSON.parse(localStorage.getItem("insumos")) || [];
let recetas = JSON.parse(localStorage.getItem("recetas")) || [];
let recetaActual = [];

function actualizarListaInsumos(){
  let select = document.getElementById("listaInsumos");
  select.innerHTML="";
  insumos.forEach((i,index)=>{
    let option = document.createElement("option");
    option.value=index;
    option.text=i.nombre;
    select.appendChild(option);
  });
}

function agregarInsumo(){
  let nombre = document.getElementById("insumoNombre").value;
  let costo = parseFloat(document.getElementById("insumoCosto").value);
  if(!nombre || !costo) return alert("Completar datos");

  insumos.push({nombre,costo});
  localStorage.setItem("insumos", JSON.stringify(insumos));
  actualizarListaInsumos();
  alert("Insumo guardado");
}

function agregarItem(){
  let index = document.getElementById("listaInsumos").value;
  let cantidad = parseFloat(document.getElementById("cantidadInsumo").value);
  if(!cantidad) return alert("Ingresar cantidad");

  let insumo = insumos[index];
  let subtotal = insumo.costo * cantidad;
  recetaActual.push({nombre:insumo.nombre, subtotal});

  actualizarReceta();
}

function actualizarReceta(){
  let ul = document.getElementById("itemsReceta");
  ul.innerHTML="";
  let total=0;

  recetaActual.forEach(i=>{
    let li=document.createElement("li");
    li.textContent = i.nombre + " - $" + i.subtotal;
    ul.appendChild(li);
    total+=i.subtotal;
  });

  document.getElementById("costoTotal").textContent = total;
}

function guardarReceta(){
  let nombre = document.getElementById("recetaNombre").value;
  if(!nombre) return alert("Nombre de receta");

  recetas.push({nombre, items:recetaActual});
  localStorage.setItem("recetas", JSON.stringify(recetas));
  recetaActual=[];
  actualizarReceta();
  mostrarRecetas();
  alert("Receta guardada");
}

function mostrarRecetas(){
  let ul = document.getElementById("recetasGuardadas");
  ul.innerHTML="";
  recetas.forEach(r=>{
    let li=document.createElement("li");
    li.textContent=r.nombre;
    ul.appendChild(li);
  });
}

actualizarListaInsumos();
mostrarRecetas();
</script>

</body>
</html>
